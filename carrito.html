<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito | Hidden Brand</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<!-- Barra de navegación -->
<nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
    <div class="container">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarToggler" aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand fw-bold text-primary" href="index.html">Hidden Brand</a>

        <div class="collapse navbar-collapse" id="navbarToggler">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item"><a class="nav-link" href="index.html">Inicio</a></li>
                <li class="nav-item"><a class="nav-link active" href="productos.html">Productos</a></li>
                <li class="nav-item"><a class="nav-link" href="#">Ofertas</a></li>
                <li class="nav-item"><a class="nav-link" href="contact.html">Contacto</a></li>
            </ul>
            <a href="carrito.html" class="btn btn-outline-primary ms-3 position-relative">
                <i class="fas fa-shopping-cart"></i>
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                </span>
                <span class="visually-hidden">Productos en el carrito</span>
            </a>
        </div>
    </div>
</nav>
<!-- Fin de la barra de navegación -->

<main class="container mt-4">
    <h2>Carrito de Compras</h2>
    <div id="cartItems" class="mt-3"></div>

    <!-- Total y botones de acción -->
    <div class="mt-4 d-flex justify-content-between align-items-center">
        <strong id="totalPrice">Total: $0</strong>
        <div>
            <button class="btn btn-danger" onclick="clearCart()">Vaciar carrito</button>
            <button class="btn btn-primary">Proceder a Pagar</button>
        </div>
    </div>
</main>

<footer class="container mt-5">
    <p>&copy; 2024 Hidden Brand. Todos los derechos reservados.</p>
</footer>

<!-- JavaScript de Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- JavaScript para el carrito -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        loadCart();
    });
    
    function loadCart() {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        const cartItems = document.getElementById('cartItems');
        cartItems.innerHTML = '';
    
        let total = 0;
    
        cart.forEach((item, index) => {
            const itemPrice = parseFloat(item.price) || 0;
            const itemQuantity = parseInt(item.quantity) || 0;
            const itemTotal = itemPrice * itemQuantity;
            total += itemTotal;
    
            cartItems.innerHTML += `
                <div class="card mb-3">
                    <div class="card-body">
                        <h5 class="card-title">${item.name}</h5>
                        <p class="card-text">Precio: $${itemPrice.toFixed(2)}</p>
                        <p class="card-text">Color: ${item.color}</p>
                        <p class="card-text">Talla: ${item.talla}</p>
                        <div class="d-flex align-items-center">
                            <label class="me-2">Cantidad:</label>
                            <input type="number" class="form-control me-2" value="${item.quantity}" min="1" style="width: 70px;" onchange="updateQuantity(${index}, this.value)">
                            <button class="btn btn-danger" onclick="removeFromCart(${index})">Eliminar</button>
                        </div>
                        <p class="mt-2">Subtotal: $${itemTotal.toFixed(2)}</p>
                    </div>
                </div>
            `;
        });
    
        document.getElementById('totalPrice').textContent = `Total: $${total.toFixed(2)}`;
    }
    
    function updateQuantity(index, newQuantity) {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        cart[index].quantity = parseInt(newQuantity);
        localStorage.setItem('cart', JSON.stringify(cart));
        loadCart();
    }
    
    function removeFromCart(index) {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        cart.splice(index, 1);
        localStorage.setItem('cart', JSON.stringify(cart));
        loadCart();
        updateCartCount();  // Actualiza el contador
    }
    
    function clearCart() {
        localStorage.removeItem('cart');
        loadCart();
        updateCartCount();  // Actualiza el contador
    }
    
</script>

</body>
</html>
